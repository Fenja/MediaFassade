<!DOCTYPE html>
<html lang="de">
  <head>
    <title>View</title>
    <meta charset="UTF-8">
    <link rel="apple-touch-icon" sizes="57x57" href="media/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="media/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="media/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="media/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="media/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="media/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="media/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="media/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="media/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="media/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="media/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="media/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="media/favicon/favicon-16x16.png">
    <link rel="manifest" href="media/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="media/favicon/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <link rel="shortcut icon" href="media/favicon/favicon.ico" type="image/x-icon">
    <link rel="icon" href="media/favicon/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="styles/client.css">
    <link rel="stylesheet" type="text/css" href="../external/libs/js/jquery/jquery-ui-1.11.4.custom/jquery-ui.min.css">
    <link rel="stylesheet" type="text/css" href="../external/libs/js/jquery/jquery-ui-1.11.4.custom/jquery-ui.structure.min.css">
    <link rel="stylesheet" type="text/css" href="../external/libs/js/jquery/jquery-ui-1.11.4.custom/jquery-ui.theme.min.css">
    <script src="../external/libs/js/jquery/jquery-2.1.4.min.js"></script>
    <script src="../external/libs/js/jquery/jquery-ui-1.11.4.custom/jquery-ui.min.js"></script>
    <script src="../external/libs/js/doccookies.js"></script>
    <script src="../external/libs/js/howler.js/howler.min.js"></script>
    <script src="../includes/framework.js"></script>
    <script>
      var objectsToInject={"draggable_joystick":{"lastID":0,"objects":[{"type":"draggable_joystick","id":0,"x":0.611974833610649,"y":0.41420118343195267,"h":0.5,"w":0.5,"scale":1,"constraint":true,"zindex":66,"opacity":1}]},"draggable_keylistener":{"lastID":0,"objects":[{"type":"draggable_keylistener","id":0,"x":0.27602433444259566,"y":0.4970414201183432,"h":0.1,"w":0.1,"scale":1,"constraint":false,"zindex":66,"opacity":1}]}};
      var key='kdtr';
      $.getScript(location.protocol+'//'+location.hostname+(location.port ? ':'+location.port: '')+'/socket.io/socket.io.js');
        
    </script>
    <script>
      gravatarUser={};
      gravatarUserData = function(p) {
        gravatarUser=p;
        return console.log(JSON.stringify(gravatarUser));
      };
    </script>
    <style>
      label, input { display:block; }
      input.text { margin-bottom:12px; width:95%; padding: .4em; }
      fieldset { padding:0; border:0; margin-top:25px; }
      .ui-dialog .ui-state-error { padding: .3em; }
      .validateTips { border: 1px solid transparent; padding: 0.3em; }
      #login {z-index:100;}
      
    </style>
    <script src="../custom/libs/js/custom_head.js"></script>
  </head>
  <body>
    <div id="loading" name="loading" style="position:absolute;left:0;top:0;width:100%;height:100%;z-index:12345;background-color:#002;margin:0;padding: 0;" class="loading">
      <table style="left:0;top:0;width:100%;height:100%;">
        <tr>
          <td align="center">
            <div id="loadingtxt" name="loadingtxt" align="left" style="width:100%;height:100%;left:40%;top:45%;color:#fff;font:24pt Helvetica, Arial;">Loading</div>
          </td>
        </tr>
      </table>
      <script>
        function loading(){
          var l=0;
          function step(){
            l++;if (l>5){l=0;}
            var s="Loading ";
            if(l==0){s+='*&nbsp;';}
            if(l==1){s+='&nbsp;*&nbsp;';}
            if(l==2){s+='&nbsp;&nbsp;*';}
            if(l==3){s+='&nbsp;&nbsp;<sub>*</sub>';}
            if(l==4){s+='&nbsp;<sub>*</sub>&nbsp;';}
            if(l==5){s+='<sub>*</sub>&nbsp;&nbsp;';}
            var e=document.getElementById('loadingtxt').innerHTML=s;
          }
          loadingTimer=setInterval(step, 200);
        }
        function loaded(){
          clearTimeout(loadingTimer);
          $( "#loadingtxt" ).fadeOut( "slow", function() {
            $( "#loading" ).fadeOut( "slow", function() {
              $( "#loading" ).remove();
            });
          });      
        }
        var loadingTimer;
        loading();
      </script>
    </div>
    
    <div id="screen">
      <img id="bgr" src="images/mf_bg.png"/>
      <div id="blend"><div id="debug">DEBUG</div></div>
      <script src="../custom/libs/js/custom_body.js"></script>
      <script>
        function opendialog(title,content,closeable){
          if(closeable==null){closeable=true};
        
          d = $('<div/>').attr({
            id: 'dialog-message',
            title: title
          }).append($('<p/>').html(content));
        
          $('body').append(d);
          if(closeable){
            d.dialog({
              autoOpen:true,
              modal: true,
              width:'auto',
              open: function (event, ui) {
                     $('.ui-dialog').css('z-index',12347);
                     $('.ui-widget-overlay').css('z-index',12346);
                    },
              buttons: {
                Ok: function() {
                  $( this ).dialog( "close" ).dialog( "destroy" );
                  $('#dialog-message').remove();
                }
              }
            });
          }else{
            d.dialog({
              autoOpen:true,
              modal: true,
              width:'auto',
              open: function (event, ui) {
                     $('.ui-dialog').css('z-index',12347);
                     $('.ui-widget-overlay').css('z-index',12346);
                     $(".ui-dialog-titlebar-close", ui.dialog | ui).hide(); 
                    }
            });
          }
        
          $('#dialog-message').css("z-index","11111 !important");
        }
      </script>
      <script>
        $(function() {
          opt={socketserver:window.location.protocol+'//'+window.location.host};
          console.log ("Fetching from Socketserver: " + opt.socketserver)
          
          console.log ("- window.location.host: " + window.location.host)
          console.log ("- window.location.hostname: " + window.location.hostname)
          console.log ("- window.location.port: " + window.location.port)
          console.log ("- window.location.protocol: " + window.location.protocol)
          
          console.log ("loadscript: " + opt.socketserver+'/socket.io/socket.io.js')
          $.getScript(opt.socketserver+'/socket.io/socket.io.js')
            .done(function( script, textStatus ) {
              //console.log( textStatus );
              var s='libs/js/view.js';
              //console.log(s);
              
              console.log ("loadscript: " + s)
          
              $.getScript(s)
                .done(function( script, textStatus ) {
                  var s2='../custom/libs/js/custom_end.js';
                  
                  if(s2==""){
                    loaded();
                  }else{
                    console.log ("loadscript: " + s2)
                    $.getScript(s2)
                      .done(function( script, textStatus ) {
                        loaded();
                      })
                      .fail(function( jqxhr, settings, exception ) {
                        opendialog("Fehler","Triggered ajaxError 3. handler for <i><a href=\""+s2+"\""+s2+"<br /><br />"+exception+"</a></i>",false );
                        console.log(exception);
                        console.log("scriptname:"+scriptname);
                        console.log("s:"+s);
                        console.log("s2:"+s2);
                    });
                    
                  }
                })
                .fail(function( jqxhr, settings, exception ) {
                  opendialog("Fehler","Triggered ajaxError 2. handler for <i><a href=\""+s+"\""+s+"<br /><br />"+exception+"</a></i>",false );
                  console.log(exception);
                  console.log("scriptname:"+scriptname);
                  console.log("s:"+s);
                  console.log("s2:"+s2);
              });
            })
            .fail(function( jqxhr, settings, exception ) {
              opendialog("Fehler","Triggered ajaxError 1. handler for <i><a href=\""+script+"\""+script+"<br /><br />"+exception+"</a></i>",false );
              console.log(exception);
              console.log("scriptname:"+scriptname);
              console.log("s:"+s);
              console.log("s2:"+s2);
          });
        });
      </script>
      <div id="global-highscore">0 HAW</div>
      
      <div id="zero" class="element"></div>
      <div id="one" class="element"></div>
      <div id="two" class="element"></div>
      <div id="bomb" class="element"></div>
      <div id="power" class="element"></div>
      
      <div id="player1" class="player" style="left:10%">        
        <img src="images/chara01.png" class="playerimage" style="position:relative;left:0;top:0;height: 100%;width: 100%;"/>
        <div id="basket1" style="position:absolute;left:0;top:52%;height: 20%;width: 100%;">
          <img id="basketimage13" src="images/chara01_basket.png" style="position:relative;left:0;top:0;height: auto;width: 100%;"/>
          <span id="score1" class="highscore" style="position:relative;left:62%;top:-76%;">0</span>          
        </div>
        <span id="timeout1" class="timeout" style="position:absolute;left:0;top:0;">#</span>
      </div>
      </div>
      <div id="player2" class="player" style="left:22%">        
        <img src="images/chara02.png" class="playerimage" style="position:relative;left:0;top:0;height: 100%;width: 100%;"/>
        <div id="basket2" style="position:absolute;left:0;top:52%;height: 20%;width: 100%;">
          <img id="basketimage2" src="images/chara02_basket.png" style="position:relative;left:0;top:0;height: auto;width: 100%;"/>
          <span id="score2" class="highscore" style="position:relative;left:62%;top:-76%;">0</span>          
        </div>
        <span id="timeout2" class="timeout" style="position:absolute;left:0;top:0;">#</span>
      </div>
      </div>
      <div id="player3" class="player" style="left:33%">        
        <img src="images/chara03.png" class="playerimage" style="position:relative;left:0;top:0;height: 100%;width: 100%;"/>
        <div id="basket3" style="position:absolute;left:0;top:52%;height: 20%;width: 100%;">
          <img id="basketimage3" src="images/chara03_basket.png" style="position:relative;left:0;top:0;height: auto;width: 100%;"/>
          <span id="score3" class="highscore" style="position:relative;left:62%;top:-76%;">0</span>          
        </div>
        <span id="timeout3" class="timeout" style="position:absolute;left:0;top:0;">#</span>
      </div>
      </div>
      <div id="player4" class="player" style="left:44%">        
        <img src="images/chara04.png" class="playerimage" style="position:relative;left:0;top:0;height: 100%;width: 100%;"/>
        <div id="basket4" style="position:absolute;left:0;top:52%;height: 20%;width: 100%;">
          <img id="basketimage4" src="images/chara04_basket.png" style="position:relative;left:0;top:0;height: auto;width: 100%;"/>
          <span id="score4" class="highscore" style="position:relative;left:62%;top:-76%;">0</span>          
        </div>
        <span id="timeout4" class="timeout" style="position:absolute;left:0;top:0;">#</span>
      </div>
      <div id="player5" class="player" style="left:55%">        
        <img src="images/chara05.png" class="playerimage" style="position:relative;left:0;top:0;height: 100%;width: 100%;"/>
        <div id="basket5" style="position:absolute;left:0;top:52%;height: 20%;width: 100%;">
          <img id="basketimage5" src="images/chara05_basket.png" style="position:relative;left:0;top:0;height: auto;width: 100%;"/>
          <span id="score5" class="highscore" style="position:relative;left:62%;top:-76%;">0</span>          
        </div>
        <span id="timeout5" class="timeout" style="position:absolute;left:0;top:0;">#</span>
      </div>
      <div id="player6" class="player" style="left:66%">        
        <img src="images/chara06.png" class="playerimage" style="position:relative;left:0;top:0;height: 100%;width: 100%;"/>
        <div id="basket6" style="position:absolute;left:0;top:52%;height: 20%;width: 100%;">
          <img id="basketimage6" src="images/chara06_basket.png" style="position:relative;left:0;top:0;height: auto;width: 100%;"/>
          <span id="score6" class="highscore" style="position:relative;left:62%;top:-76%;">0</span>          
        </div>
        <span id="timeout6" class="timeout" style="position:absolute;left:0;top:0;">#</span>
      </div>
      
      </div><!--screen-->
    </div>
  </body>
</html>
